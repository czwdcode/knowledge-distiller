# 视频文字信息提取

## 目标
- 从视频中准确提取文字内容
- 为后续知识处理提供结构化输入

## 存在的方案

### 音频提取转文字
需要先提前安装好ffmpeg并添加到环境变量,便于yt-dlp调用处理音频

### 直接提取字幕
使用yt-dlp工具下载视频字幕。

#### 安装方式
1. **直接下载**：访问[yt-dlp GitHub仓库](https://github.com/yt-dlp/yt-dlp)下载可执行文件。
2. **Python环境安装**：通过pip命令安装。
   ```bash
   pip install yt-dlp
   ```

#### 处理需要登录的视频网站
部分视频网站需要登录才能获取字幕信息，可通过以下方式解决：

1. **使用浏览器cookies**：
   - yt-dlp支持从浏览器直接读取cookies。
   - 基于Chrome内核的浏览器使用有问题，推荐使用Firefox。
   - 命令示例：
     ```bash
     yt-dlp --cookies-from-browser firefox
     ```

2. **使用cookies文件（推荐使用这种）**：
   - 对于Chrome浏览器，可使用扩展程序[Get cookies.txt LOCALLY](https://chrome.google.com/webstore/detail/get-cookiestxt-locally/cclelndahbckbenkjhflpdbgdldlbecc)导出cookies文件。
   - 命令示例：
     ```bash
     yt-dlp --cookies /path/to/cookies/file.txt
     ```

#### 获取字幕的具体步骤
1. **查看可用字幕**：
   - 使用以下命令查看视频是否包含字幕及字幕语言选项：
     ```bash
     yt-dlp --list-subs URL
     ```

2. **下载字幕**：
   - 使用以下命令下载指定语言的字幕文件（不下载视频本身）：
     ```bash
     yt-dlp --cookies --skip-download --write-subs --sub-langs "zh" URL
     ```
   - 参数说明：
     - `--skip-download`：跳过视频下载
     - `--write-subs`：启用字幕下载
     - `--sub-langs`：指定要下载的字幕语言代码
     - `--cookies`：指定cookies的文件地址
   - 注意事项：
     - 最好添加`--user-agent`参数
     - 如果本机开启着代理软件，那么使用`--proxy`指定代理，或者关闭代理软件